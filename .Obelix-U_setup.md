# Setup instructions for my Obelix system with Ubuntu 18.04 & Win10

## Pre-configure
* Install Latest Bios 0044
* Disabled Intel GPU in BIOS
* Install Windows 10

## Install Ubuntu
Installed Ubuntu 18.04 Desktop using nomodeset as a grub option during install and regular boot

### Updated all packages
```sh
sudo apt-get update
sudo apt-get upgrade
```

### Install latest stable 18.1.3-1 mesa Ubuntu release from this PPA: https://launchpad.net/~ubuntu-x-swat/+archive/ubuntu/updates
```sh
sudo add-apt-repository ppa:ubuntu-x-swat/updates
sudo apt-get update
sudo apt-get upgrade
```

### Install daily Ubuntu kernel release (2018-07-09): http://kernel.ubuntu.com/~kernel-ppa/mainline/daily/2018-07-09/
```sh
wget http://kernel.ubuntu.com/~kernel-ppa/mainline/daily/2018-07-09/linux-modules-4.18.0-999-generic_4.18.0-999.201807090200_amd64.deb
wget http://kernel.ubuntu.com/~kernel-ppa/mainline/daily/2018-07-09/linux-image-unsigned-4.18.0-999-generic_4.18.0-999.201807090200_amd64.deb
wget http://kernel.ubuntu.com/~kernel-ppa/mainline/daily/2018-07-09/linux-headers-4.18.0-999-generic_4.18.0-999.201807090200_amd64.deb
wget http://kernel.ubuntu.com/~kernel-ppa/mainline/daily/2018-07-09/linux-headers-4.18.0-999_4.18.0-999.201807090200_all.deb
sudo dpkg -i *.deb
```
### Reboot (still using nomodeset)

### Install AMDGPU Vega M firmware from: https://people.freedesktop.org/~agd5f/radeon_ucode/vegam/
```sh
$ wget -m -np https://people.freedesktop.org/~agd5f/radeon_ucode/vegam/
$ sudo cp people.freedesktop.org/~agd5f/radeon_ucode/vegam/*.bin /lib/firmware/amdgpu
$ sudo /usr/sbin/update-initramfs -u -k all
```

### Reboot (without nomodeset)

## Installs

### Usual suspects
```sh
sudo apt install python-pip python-gpg git vim i3 mpv conky ubuntu-restricted-extras mplayer feh tilda qutebrowser libpulse-dev py3status libboost-program-options-dev rxvt-unicode-256color ncurses-term fonts-inconsolata calibre ssmtp moc moc-ffmpeg-plugin
```

### Install wine
If you are using a 64-bit Architecture, then enable 32-bit for better compatibility

```sh
sudo dpkg --add-architecture i386
```
Add the Wine Key, Wine Repository & Update Repositories
```sh
wget -nc https://dl.winehq.org/wine-builds/Release.key
sudo apt-key add Release.key
sudo apt-add-repository https://dl.winehq.org/wine-builds/ubuntu/
sudo apt update
```
Then install the version of Wine you wish to use:
```sh
sudo apt-get update
sudo apt-get install --install-recommends winehq-stable
```
Lastly run
```sh
WINEARCH=win32 winecfg
```
in the terminal to make sure it configures Wine correctly (In that order). You will also need to install winetricks (Another configuration package, really helpful for installing Windows components like .NET Framework and other needed libraries). So after this, please do:
```sh
sudo apt install winetricks
```
### Keepass (kpcli)
```sh
sudo apt install kpcli
sudo apt install cpan cpanminus
sudo vim /usr/bin/kpcli (see https://github.com/colobas/kpcli-xclip)
cd /usr/share/perl5
wget https://www.av8n.com/security/Xclip.pm
sudo cpanm File::Which
```

### Setup ebook environment
Install 
* DeDRM_tools in calibre: https://github.com/apprenticeharper/DeDRM_tools
* copy over Kindle for PC from dropbox
* open it in files
```sh
wine 
```

### Setup ssmtp
```sh
sudo vim /etc/ssmtp/ssmtp.conf
```
root=youremail@gmx.com
mailhub=mail.gmx.com:587
rewriteDomain=gmx.com
hostname=gmx.com
FromLineOverride=YES
AuthUser=youremail@gmx.com
AuthPass=yourpassword
UseSTARTTLS=YES

### razer keyboard (openrazer)
* install
```sh
sudo add-apt-repository ppa:openrazer/stable
sudo apt update
sudo apt install openrazer-meta
```
* reboot

### Snap apps don't seem so be working if this is still a problem
remove calc and characters
```sh
sudo apt install gnome-calculator gnome-characters
```

### Pamixer
```sh
cd /tmp
git clone https://github.com/cdemoulins/pamixer.git
cd pamixer
make
sudo mv pamixer /usr/bin/
```

## Configure

### Get dotfiles
??? Add instructions

### Enable terminal minimize on click
```sh
gsettings set org.gnome.shell.extensions.dash-to-dock click-action 'minimize'
```

### Fix crackling in audio ??? this didn't work fully
```sh
vim /etc/pulse/default.pa
```
edit this line load-module module-udev-detect tsched=0
retart pulseaudio 
```sh
??? Add instructions
```

### Make standard driectories
mkdir ~/script ~/project 

### Set qutebrowser to be default
xdg-settings set default-web-browser qutebrowser.desktop

## TODO
* Setup dev environment
* Setup machine learning enviroment
